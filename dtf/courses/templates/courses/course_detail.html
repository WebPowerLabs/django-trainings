{% extends 'courses/base.html' %}
{% load crispy_forms_tags %}

{% block nav_actions %}
{{ block.super }}
{% if user.is_staff %}
<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">Edit Course</a></li>
<li><a href="{% url 'lessons:add' object.slug %}" class="pull-right">Add Lesson</a></li>
<li><a class="" href='{% url "courses:delete" object.slug %}'>Delete</a></li>
{% endif %}
{% endblock nav_actions %}

{% block content %}
<section class="course-detail">
    <div class="row">
        <div class="col-md-6 bg-transparent section">
            <div class="course-info row">
                <div class="col-md-10 col-md-offset-1">
                    {% comment %}
                    <div class="row">
                        <img src="{{ object.thumbnail.url }}" class="img-rounded" alt="alt_text">
                    </div><!--/ .row-->
                    {% endcomment %}
                    <h1>{{ object.name }}</h1> 
                    <hr>               
                    <p>{{ object.description }}</p>
                </div><!--/ .col-md-9-->
            </div><!--/ .course-info-->
        </div><!--/ .col-md-6-->
        <div class="col-md-6 section">
            <div class="row">
                <div class="col-md-11">
                    <div id="collapseOne" class="panel-collapse collapse">
                        {% crispy form %}
                    </div><!--/ .panel-collapse-->
                    {% for lesson in object.lesson_set.all %}
                    <a href="{% url 'lessons:detail' lesson.slug %}?course={{ lesson.course_id }}">
                        <div class="alert alert-info">
                            <div class="row">
                                <div class="col-md-3">
                                    <img src="{{ lesson.thumbnail.url }}" alt="kind of no_video_blank image"  class="img-rounded" >
                                </div><!--/ .col-md-3-->
                                <div class="col-md-9">
                                    <h2>{{ lesson.name }}</h2>
                                    <span>{{ lesson.description|truncatewords:25 }}</span>
                                </div><!--/ .col-md-9-->
                            </div><!--/ .row-->
                        </div><!--/ .alert-->
                    </a>
                    {% endfor %}
                </div><!--/ .col-md-11-->
            </div><!--/ .row-->
        </div><!--/ .col-md-6-->
    </div><!--/ .row-->
</section>
{% endblock content %}
